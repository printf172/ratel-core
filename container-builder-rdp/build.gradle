import com.virjar.ratel.allcommon.ClassNames

buildscript {
    repositories {
        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
        gradlePluginPortal()
        maven { url "https://plugins.gradle.org/m2/" }
        google()
        jcenter()
        maven { url 'https://jitpack.io' }
        mavenCentral()
        maven { url 'https://maven.aliyun.com/repository/jcenter' }
        maven { url 'https://maven.aliyun.com/repository/google' }
        mavenLocal()
        maven { url 'https://dl.bintray.com/umsdk/release' }
        maven { url 'https://maven.google.com/' }
        maven { url 'https://maven.aliyun.com/repository/public/' }
    }

    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:5.2.0"
    }
}

apply plugin: 'java-library'
apply plugin: "com.github.johnrengelman.shadow"

sourceSets.main.resources.srcDir 'src/main/resources'


dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    api 'org.smali:smali:2.5.2'
    api 'org.smali:baksmali:2.5.2'
    api 'commons-io:commons-io:2.6'
    api 'commons-cli:commons-cli:1.4'
    api 'com.google.guava:guava:18.0'
    api 'org.apache.commons:commons-lang3:3.7'
    api project(':base-lib-apksigner')
    api(name: 'base-lib-allcommon', ext: 'jar')
}

sourceCompatibility = "8"
targetCompatibility = "8"

jar.enabled = false
shadowJar {
    baseName = 'RDP'
    //classifier是生成jar包的后缀
    classifier = null
    version = 1.0
    manifest {
        attributes 'Main-Class': ClassNames.RDP_MAIN.className
    }
}
assemble.dependsOn(shadowJar)